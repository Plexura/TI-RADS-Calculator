<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ACR TI-RADS Calculator by Plexura</title>

  <!-- ✅ Favicon & App Icons -->
  <link rel="icon" href="./favicon.png?v=10" type="image/png">
  <link rel="apple-touch-icon" href="./favicon.png?v=10">
  <meta name="theme-color" content="#2563eb">

  <!-- ✅ Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ✅ Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }
    input[type="radio"]:checked + label,
    input[type="checkbox"]:checked + label {
      border-color: #2563eb;
      background-color: #eff6ff;
    }
    input[type="radio"], input[type="checkbox"] { display: none; }
    fieldset:disabled { opacity: 0.5; pointer-events: none; }
  </style>
</head>

<body class="bg-gray-100 p-4 md:p-8">

  <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
    <!-- Header -->
    <div class="p-6 md:p-10 border-b border-gray-200 text-center">
      <img src="plexura-logo.png" alt="Plexura Logo" class="w-20 h-20 mx-auto mb-3 rounded-full shadow-sm">
      <h1 class="text-3xl font-bold text-gray-800">ACR TI-RADS Calculator</h1>
      <p class="text-sm text-gray-500 mt-1">by <strong>Plexura</strong></p>
      <p class="mt-2 text-sm md:text-base text-gray-600">A precise and intuitive calculator for thyroid nodule classification based on ACR TI-RADS (2017).</p>
    </div>

    <!-- Main Grid -->
    <div class="md:grid md:grid-cols-3">
      <!-- Left: Calculator Inputs -->
      <form id="tirads-form" class="md:col-span-2 p-6 md:p-8 space-y-6">
        <!-- Composition -->
        <fieldset id="composition-group" class="space-y-3">
          <legend class="text-lg font-semibold text-gray-900 mb-2">1. Composition</legend>
          <input type="radio" name="composition" value="0" id="comp-0" data-text="Cystic or completely cystic" checked>
          <label for="comp-0" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Cystic or completely cystic (0 pts)</label>
          <input type="radio" name="composition" value="0" id="comp-1" data-text="Spongiform">
          <label for="comp-1" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Spongiform (0 pts)</label>
          <input type="radio" name="composition" value="1" id="comp-2" data-text="Mixed cystic and solid">
          <label for="comp-2" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Mixed cystic and solid (1 pt)</label>
          <input type="radio" name="composition" value="2" id="comp-3" data-text="Solid or almost completely solid">
          <label for="comp-3" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Solid or almost completely solid (2 pts)</label>
        </fieldset>

        <!-- Echogenicity -->
        <fieldset id="echogenicity-group" class="space-y-3">
          <legend class="text-lg font-semibold text-gray-900 mb-2">2. Echogenicity</legend>
          <input type="radio" name="echogenicity" value="0" id="echo-0" data-text="Anechoic" checked>
          <label for="echo-0" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Anechoic (0 pts)</label>
          <input type="radio" name="echogenicity" value="1" id="echo-1" data-text="Isoechoic or Hyperechoic">
          <label for="echo-1" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Isoechoic / Hyperechoic (1 pt)</label>
          <input type="radio" name="echogenicity" value="2" id="echo-2" data-text="Hypoechoic">
          <label for="echo-2" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Hypoechoic (2 pts)</label>
          <input type="radio" name="echogenicity" value="3" id="echo-3" data-text="Very hypoechoic">
          <label for="echo-3" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Very hypoechoic (3 pts)</label>
        </fieldset>

        <!-- Shape -->
        <fieldset id="shape-group" class="space-y-3">
          <legend class="text-lg font-semibold text-gray-900 mb-2">3. Shape (Transverse)</legend>
          <input type="radio" name="shape" value="0" id="shape-0" data-text="Wider than tall" checked>
          <label for="shape-0" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Wider than tall (0 pts)</label>
          <input type="radio" name="shape" value="3" id="shape-1" data-text="Taller than wide">
          <label for="shape-1" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Taller than wide (3 pts)</label>
        </fieldset>

        <!-- Margin -->
        <fieldset id="margin-group" class="space-y-3">
          <legend class="text-lg font-semibold text-gray-900 mb-2">4. Margin</legend>
          <input type="radio" name="margin" value="0" id="margin-0" data-text="Smooth" checked>
          <label for="margin-0" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Smooth (0 pts)</label>
          <input type="radio" name="margin" value="0" id="margin-1" data-text="Ill-defined">
          <label for="margin-1" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Ill-defined (0 pts)</label>
          <input type="radio" name="margin" value="2" id="margin-2" data-text="Lobulated or Irregular">
          <label for="margin-2" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Lobulated / Irregular (2 pts)</label>
          <input type="radio" name="margin" value="3" id="margin-3" data-text="Extra-thyroidal extension">
          <label for="margin-3" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Extra-thyroidal extension (3 pts)</label>
        </fieldset>

        <!-- Echogenic Foci -->
        <fieldset id="foci-group" class="space-y-3">
          <legend class="text-lg font-semibold text-gray-900 mb-2">5. Echogenic Foci</legend>
          <input type="checkbox" name="foci" value="0" id="foci-0" data-type="none" data-text="None" checked>
          <label for="foci-0" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">None (0 pts)</label>
          <input type="checkbox" name="foci" value="1" id="foci-1" data-type="point" data-text="Macrocalcifications">
          <label for="foci-1" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Macrocalcifications (1 pt)</label>
          <input type="checkbox" name="foci" value="2" id="foci-2" data-type="point" data-text="Rim calcifications">
          <label for="foci-2" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Rim calcifications (2 pts)</label>
          <input type="checkbox" name="foci" value="3" id="foci-3" data-type="point" data-text="Punctate echogenic foci">
          <label for="foci-3" class="block p-4 rounded-lg border border-gray-300 cursor-pointer hover:bg-gray-50 transition">Punctate echogenic foci (3 pts)</label>
        </fieldset>

        <button type="button" id="reset-button" class="w-full px-6 py-3 bg-gray-600 text-white font-semibold rounded-lg hover:bg-gray-700 transition">Reset</button>
      </form>

      <!-- Right: Results -->
      <div class="md:col-span-1 bg-gray-50 p-6 md:p-8 border-l border-gray-200">
        <div class="sticky top-6 space-y-5">
          <div><span class="text-sm font-medium text-gray-500">Total Points</span>
            <p id="total-points" class="text-4xl font-bold text-blue-600">0</p></div>
          <div><span class="text-sm font-medium text-gray-500">Classification</span>
            <p id="ti-rads-level" class="text-3xl font-bold text-gray-800">TR1</p>
            <p id="ti-rads-desc" class="text-lg font-medium text-gray-800">Benign</p></div>
          <div><span class="text-sm font-medium text-gray-500">Risk of Malignancy</span>
            <p id="risk-level" class="text-lg font-semibold text-gray-700">0.3%</p></div>
          <hr>
          <div><h3 class="text-lg font-semibold text-gray-900">Management</h3>
            <div id="size-input-group" class="hidden mt-2">
              <label for="nodule-size" class="block text-sm text-gray-700 mb-1">Nodule Size (cm)</label>
              <input type="number" id="nodule-size" step="0.1" class="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div id="recommendation-box" class="p-4 mt-3 rounded-lg bg-white border border-gray-200">
              <p id="recommendation-text" class="text-gray-800 font-medium">No FNA or follow-up required.</p>
              <p id="follow-up-text" class="text-sm text-gray-600 mt-1"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="text-center text-gray-500 text-xs mt-12 mb-6">
    © Plexura 2025 · <em>The Living Mind of Diagnostic Intelligence</em> · Educational use only.
  </footer>

  <script>
    // JS remains identical to your current version — it works fine.
  </script>
</body>
</html>
